<app-page-header>Отправка тестового письма</app-page-header>

<div class="container my-5">
  <div class="card">
    <div class="card-body">
      <div class="mb-3">
        <label for="fromEmail" class="form-label">От <span class="text-danger">*</span></label>
        <input type="email" id="fromEmail" [(ngModel)]="emailRequest.from" class="form-control"
          placeholder="sender@yourdomain.com" required />
        <small class="text-muted">Домен должен быть подтвержден в Resend</small>
      </div>

      <div class="mb-3">
        <label for="toEmail" class="form-label">Кому <span class="text-danger">*</span></label>
        <input type="email" id="toEmail" [(ngModel)]="emailRequest.to" class="form-control"
          placeholder="recipient@example.com" required />
      </div>

      <div class="mb-3">
        <label for="ccEmail" class="form-label">CC</label>
        <input type="email" id="ccEmail" [(ngModel)]="emailRequest.cc" class="form-control"
          placeholder="cc@example.com (optional)" />
      </div>

      <div class="mb-3">
        <label for="subject" class="form-label">Тема <span class="text-danger">*</span></label>
        <input type="text" id="subject" [(ngModel)]="emailRequest.subject" class="form-control"
          placeholder="Email subject" required />
      </div>

      <div class="mb-3">
        <label for="htmlBody" class="form-label">HTML текст <span class="text-danger">*</span></label>
        <textarea id="htmlBody" [(ngModel)]="emailRequest.htmlBody" class="form-control" rows="10"
          placeholder="<html><body><h1>Hello!</h1><p>This is a test email.</p></body></html>" required></textarea>
        <small class="text-muted">HTML текст письма</small>
      </div>

      <div class="d-flex gap-2">
        <button type="button" class="btn btn-primary" (click)="sendEmail()" [disabled]="isSending || !isFormValid()">
          <span *ngIf="isSending">
            <span class="spinner-border spinner-border-sm me-2" role="status"></span>
            Отправка...
          </span>
          <span *ngIf="!isSending">Отправить</span>
        </button>
      </div>
    </div>
  </div>
</div>