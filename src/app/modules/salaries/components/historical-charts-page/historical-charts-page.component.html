<app-page-header>Исторические данные</app-page-header>

<div class="container my-5" *ngIf="data; else dataLoading">
  <div class="mb-4" *ngIf="data.from && data.to">
    <span class="text-muted">
      Период: {{ data.from | date: "dd.MM.yyyy" }} -
      {{ data.to | date: "dd.MM.yyyy" }}
    </span>
  </div>

  <div *ngIf="data.templates && data.templates.length > 0; else noData">
    <div
      class="card card-body mobile-px-5 mobile-py-5 mb-4"
      *ngFor="let template of data.templates"
    >
      <div class="display-6 mb-4">
        {{ template.name || "Общие данные" }}
      </div>

      <div class="mb-5">
        <app-historical-salaries-chart [template]="template" />
      </div>
    </div>
  </div>

  <ng-template #noData>
    <div class="card card-body">
      <p class="text-muted mb-0">Нет данных для отображения</p>
    </div>
  </ng-template>
</div>

<ng-template #dataLoading>
  <div class="container my-5">
    <app-data-loader></app-data-loader>
  </div>
</ng-template>
